function init(){setNavigation(),rate(),newCommentDisplay(),dateFormat(document),addOpinionButtonAction(),hideLandingPage(),skipLandingPage(),AddFunctionDestroyComment()}function scrollToFormBottom(){$(document.querySelector("body")).animate({scrollTop:$("#showForm").offset().top},"slow")}function hideLandingPage(){function t(){landpic.slideUp(600)}$("#button-getStarted").on("click",t),$(window).on("scroll",t)}function skipLandingPage(){$("#oNas").click(function(){landpic.hide()})}function resetStars(){for(var t=0;t<starsQuantity;t++)stars[t].innerHTML="&#9734;",stars[t].classList.remove("rate-hover")}function setNavigation(){var t=window.location.pathname;t=t.replace(/\/$/,""),t=decodeURIComponent(t),$(".nav a").each(function(){var e=$(this).attr("href");t===e&&$(this).closest("a").attr("id","active")})}function dateFormat(t){for(var e=t.querySelectorAll(".date"),n=new Date,o=0,a=e.length;o<a;o++){var r=new Date(e[o].innerText),s=n.getDate()-r.getDate(),i=r.getMinutes(),c=r.getHours()+":"+(i<10?"0":"")+i;e[o].innerText=s<=1?"Today at "+c:s<=2?"Yesterday at "+c:s+" days ago",$(e[o]).show(0)}}function newCommentDisplay(){$("#button-sendOpinion").click(function(){var t={numOfStars:form.find("#rateNum").val(),commentText:form.find("#text").val(),commentAvatar:form.find("#avatar").val(),commentAuthor:form.find("#currentuser").val()};console.log(t),t.numOfStars&&t.commentText&&postComment(t)})}function postComment(t){$.ajax({type:"POST",url:"http://localhost:3000/skinguide",data:t,headers:{"X-Requested-With":"XMLHttpRequest"},success:function(e){t.commentId=e,form[0].reset(),resetStars(),clicked=0,displayComment(t),scrollToFormBottom(),AddFunctionDestroyComment()},error:error})}function AddFunctionDestroyComment(){$(".button-DeleteComment").each(function(){var t=$(this);t.on("click",function(){console.log("delete click",t),commentId={commentId:$.trim(t.attr("data"))},console.log("commentId: ",commentId),$.ajax({url:"http://localhost:3000/skinguide",data:commentId,type:"DELETE",success:function(){t.parents("div.comment").hide("normal",function(){$(this).remove()})},error:error})})})}function error(t,e,n){console.log("Error, status = "+e+", error thrown: "+n)}function displayComment(t){console.log("dataL!!!!!",t);var e="",n=document.getElementsByClassName("comment")[0];n=$(n).clone()[0];for(var o=0;o<t.numOfStars;o++)e+="<span>&#9733;</span>\n";n.getElementsByTagName("img")[0].setAttribute("src",t.commentAvatar),n.getElementsByClassName("author")[0].innerText=t.commentAuthor,n.getElementsByClassName("starsRated")[0].innerHTML=e,n.getElementsByClassName("text")[0].innerText=t.commentText,n.getElementsByClassName("date")[0].innerText=Date(),n.getElementsByClassName("button-DeleteComment")[0].setAttribute("data",t.commentId),dateFormat(n),$(n.outerHTML).appendTo("#commentsWrapper").hide(0,function(){$(this).show("normal")})}function rate(){function t(t){stars[t].innerHTML="&#9733;",stars[t].classList.add("rate-hover")}for(var e=0;e<starsQuantity;e++)stars[e].addEventListener("click",function(){clicked=this.getAttribute("value"),document.querySelector("#rateNum").setAttribute("value",clicked),resetStars();for(var e=0;e<clicked;e++)t(e)}),stars[e].addEventListener("mouseenter",function(){resetStars();for(var e=this.getAttribute("value"),n=0;n<e;n++)t(n)}),stars[e].addEventListener("mouseleave",function(){resetStars();for(var e=0;e<clicked;e++)t(e)})}function addOpinionButtonAction(){$("#button-addOpinion").click(function(){$("#showForm").show("normal")})}function navHideShowOnScroll(){function t(){var t=$(this).scrollTop();Math.abs(n-t)<=o||(t>n&&t>a?$(".navbar").removeClass("nav-down").addClass("nav-up"):t+$(window).height()<$(document).height()&&$(".navbar").removeClass("nav-up").addClass("nav-down"))}var e,n=0,o=5,a=$(".navbar").outerHeight();$(window).scroll(function(t){e=!0}),setInterval(function(){e&&(t(),e=!1)},250)}var stars=document.querySelectorAll(".rate span"),starsQuantity=stars.length,form=$("#formA"),landpic=$("#landpic"),clicked=0;init();